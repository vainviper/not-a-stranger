<% include ../partials/header %>

<div class="background"></div>

<button id="fastNPCButton" class="btn btn-dark btn-sm" style="margin-top: 10px;">Fast NPC</button>
<div id="pop-up-fast-NPC" class="invisible">
    <div class="form-group clickProof">
        <h5 class="fastStrangerTitleH5 clickProof">Fast NPC</h5>
        <form id="formFastStranger" action="/lists/<%= list._id %>/strangers" method="POST" autocomplete="off">
            <td><input class="form-control-sm clickProof" type="text" name="firstName" required autofocus></td>
            <span class="clickProof">Enter name</span>
            <td><input class="form-control-sm clickProof" type="text" name="bio"></td>
            <span class="clickProof">Enter some info</span>
            <input type="hidden" type="text" name="lastName" value=" ">
            <input type="hidden" name="age" value="0">
            <input type="hidden" type="number" name="currentAge" value="<%= list.currentAge %>">
            <input type="hidden" name="group" value="000000000000000000000000">
            <td><button class="btn btn-sm btn-dark fastCreateButton clickProof">Create NPC</button></td>
        </form>
    </div>
</div>

<div id="adjustPosition" class="row">
    <div class="col-md-12">
        <h1 class="listHeader"><%= list.name %></h1>
        <h4 class="subListHeader">In the year of <%= list.currentAge %></h4>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <table class="table sortable">
            <tr>
                <th>Name</th>
                <th>Occupation</th>
                <th>Description</th>
                <th>Group</th>
            </tr>
            <% stranger.forEach(function(stranger){ %>
                <tr>
                    <td>
                        <a href="/lists/<%= list._id %>/strangers/<%= stranger._id %>">
                            <strong><%= stranger.firstName + " " + stranger.lastName%></strong>
                        </a>
                        <a class="btn btn-dark btn-sm inlineStrangerEditButton" href="/lists/<%= list._id %>/strangers/<%= stranger._id %>/edit">E</a>
                    </td>
                    <td><%= stranger.occupation %></td>
                    <td class="tableOverflow"><%= stranger.bio %></td>
                    <% if(stranger.group.id === null) { %>
                        <td class="tableOverflow"></td>
                    <%} else { %>
                        <td class="tableOverflow"><a href="/lists/<%= list._id %>/groups/<%= stranger.group.id._id %>"><%= stranger.group.id.name %></a></td>
                    <% } %>  
                </tr>
            <% }) %>
        </table>
    </div>
</div>
<div class="row" style="margin-top: -17px;">
    <div class="col-md-12">
        <table class="table">
            <tr>
                <td>
                    <a class="" href="/lists/<%= list._id %>/strangers/new">
                        <i class="fas fa-plus"></i>
                    </a>
                </td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <a class="btn btn-sm btn-dark backButton" style="margin: 0px -5px 10px 0;" href="/lists">Collections</a>
    </div>
</div>

<script src="/scripts/toggleFastNPC.js"></script>
<% include ../partials/footer %> 